# 常见问题

## 介绍

### 什么是stencil？

stencil是面向开发人员的工具链，用于构建可重用，可伸缩的组件库，应用程序和设计系统。它提供了生成高度优化的Web组件的编译器，并将最流行的框架的最佳概念组合到一个简单的构建时工具中。

stencil专注于使用Web标准构建组件。世界各地的开发人员和组织都在使用它，并且它是[100％免费的MIT开源软件](https://github.com/ionic-team/stencil/blob/master/LICENSE.md)。

### stencil能做什么？

模具帮助开发人员和团队构建和共享自定义组件。由于Stencil生成符合标准的Web组件，因此使用Stencil生成的组件可以直接与许多流行的框架一起使用，甚至可以不用框架使用，因为它们只是Web组件。Stencil还启用了Web组件之上的许多关键功能，尤其是预渲染和对象即属性（不仅仅是字符串）。

### stencil为了谁而出现？

Stencil适用于希望构建可在团队，框架和大型组织之间共享的自定义组件库和设计系统的开发人员和团队。

希望将原始设计愿景始终如一地，高保真地交付给所有用户的设计师也可以使用Stencil。

### stencil由谁开发的？

Stencil是由Ionic核心团队发起的一个开放源代码项目，社区也做出了贡献。

### 为什么开发了stencil？

Stencil是由Ionic Framework团队创建的，目的是使我们自己的组件库更快，更小并与所有主要框架兼容。Web Components提供了一种解决方案，将更多的工作投入浏览器以提高性能，并针对所有框架都可以使用的基于标准的组件模型。


### 谁正在使用stencil？

Stencil最初是为Ionic Framework开发的，已经成为非常成功的基于Web组件的设计系统/ UI框架。现在，Web组件已存在数千个应用程序商店应用程序中，并且每年将创建近400万个新的Ionic Framework项目。

### stencil与传统框架相比如何？


Web组件生态系统具有各种各样的参与者，每个参与者对Web组件可以做什么都应该有不同的长期愿景。

一些人认为Web组件应该替代第三方应用程序框架，而另一些人则认为Web组件更适合叶子/样式/设计节点，而不应该从事应用程序组件系统的业务。也有许多框架开发人员没有意识到Web组件的意义，或者认为它们是对前端创新的冒犯。

有了Stencil，我们的愿景就在中间。从长远来看，我们认为应用程序开发团队将继续使用他们选择的框架。我们设想这些框架将继续变得更好，更小，更有效，并为目标和使用Web组件提供越来越好的支持，随着企业继续将它们用于共享设计系统，大型团队也将使用越来越多的Web组件。

同时，我们认为Web组件不可或缺的功能正在解决这些组件分发和设计系统问题。但是，我们还相信，90％的市场都不是一开始就存在这些问题的，因此，当前有关Web组件优点的争论有些无济于事。

### 为什么stencil被认为与框架无关？

Web组件最吸引人的好处也许是它们使您的开发团队可以灵活地选择基础工具和框架以及这些框架的版本及他们喜欢的工具。如前所述，实现通用设计系统的一大挑战是使所有开发团队仅对一套技术进行标准化。借助Web组件，每个团队都可以使用最适合自己的工具，从而为他们提供了完全自由的使用方式，无论是现在还是将来。

## stencil提供什么？

### stencil是否有组件库

使用最广泛的Stencil组件库是Ionic Framework，但是Stencil本身只是一个工具链，不提供自己的组件库。如果您正在构建应用程序，我们建议您首先检查Ionic组件。

### stencil是框架吗？

Stencil的目的不是努力充当一个独立的框架，而是一个允许开发人员在许多项目，团队和大型组织中扩展与框架无关的组件的工具。Stencil的超级能力之一就是它的灵活性：它的组件可以独立使用，也可以在传统框架内使用。

### stencil是否带有测试框架？

是的，Stencil为单元测试和端到端测试提供了丰富的API集。了解有关使用Stencil进行测试的更多信息。

## 技术

### 为什么Stencil使用Web组件？

通过使用一套一致的Web标准，Web组件无需依赖特定的框架运行时来执行。当框架更改其API时，Web组件不会更改，从而允许原始源(原始代码)继续在浏览器中本地工作。

毕竟，尽管我们热爱今天的热门框架，但谁知道明天会带来什么呢？通过选择Web组件，您可以使自己免受技术冲击的威胁。

### Stencil如何优化组件文件的大小和启动？

传统框架提供了运行时API，开发人员可以选择每个组件要使用的API。但是，这意味着每个功能特性都必须对每个组件可用，以防万一该组件可能使用或弃用API​​。

使用Stencil，编译器能够对每个组件执行静态分析，以了解正在使用和未使用哪些API。这样，Stencil能够自定义每个构建以准确使用每个组件的需求，从而以最小的尺寸实现高度优化的运行时。

由于Stencil使用编译器，因此能够在新的改进和功能可用时调整代码。可以继续使用相同的公共API和语法来编写源代码，而编译器可以调整代码以进一步利用现代功能，而无需重新编写。

### Stencil使用哪种模板语法？

Stencil并没有发明另一种需要记录和教导的模板语法，而是选择了最常用的模板语法：JSX。由于React的流行，全球数以百万计的开发人员已经熟悉JSX，这使开发人员更容易快速上手Stencil。此外，使用传统的运行时模板语法，对API的任何更改通常都需要重写组件。

重要的是要注意，JSX和VDom不一定是同一件事。一种是模板语法（JSX），另一种是渲染器（VDom）。Stencil使用了一个更小且高度优化的VDom，但是JSX支持渲染器的“工作方式”和进行的改进。所有这些都是编译器的优势，它允许用户使用众所周知的JSX语法编写代码，同时使内部结构进一步优化。

### 为什么Stencil允许组件被延迟加载？

延迟加载组件有助于减少应用程序启动时间，减小捆绑包大小并改善分发。

例如，Ionic Framework包括将近100个UI组件，这些组件都是使用Stencil构建的。如果没有延迟加载，Ionic的初始入口文件将大约为800kb。延迟加载后，所有Ionic的脚本仅为5kb。这包括iOS和Material Design以及动画和手势库的组件。由于Ionic只动态加载所用的内容，因此可以大大缩短启动时间，并且用户仅可以只完全加载其应用程序的首次绘画所需的内容。

同时，使用Stencil构建的组件仍可以由传统捆绑器导入和使用。它们也可以进行预渲染，以包括Shadow dom，在Node环境中运行，并且可以在任何框架中使用。

组件库的使用者可以使用一个组件，几个组件或全部组件。在任何一种情况下，仅通过添加脚本标签即可使用组件库，延迟加载可确保以低带宽占用量快速启动。

您还可以在“延迟加载Web组件如何与Stencil一起使用”中了解有关延迟加载的更多信息。

### Stencil为什么不扩展HTMLElement(html标记元素类)？

Web组件规范的一部分是扩展HTMLElement，但是，出于几个原因，Stencil不需要这样做。具体来说，HTMLElement将源代码锁定为只能在浏览器中运行，而不是使逻辑不受任何API的干扰。Stencil编译器能够为各种优化组件作为输出目标生成许多不同的版本，一种简化方法是将HTMLElement保留在其中。

### 为什么用TypeScript编写Stencil组件？

Stencil最初是为Ionic构建的，根据我们的经验，我们发现TypeScript是在多个团队之间维护大型代码库的宝贵工具。

### Stencil运行时具有哪些依存关系？

没有。Stencil生成的代码不依赖于Stencil，而是生成高度优化的，无框架的独立代码，这些代码可在浏览器中本地运行。

### Stencil编译器具有哪些依赖性？

TypeScript, 仅此而已。

### 可以将数据传递给Web组件吗

就像网页中的任何其他DOM元素一样，任何以数组，对象，字符串和数字形式出现的数据都可以传递给元素属性。Stencil从头开始设计，以确保应用程序开发人员能够保持这种功能的使用。

一个错误地认为只能将字符串传递给自定义元素的误解来自于开箱即用的React的VDom版本，React只能将字符串和数字传递给组件，并且不能监听自定义事件。使用Stencil可以使得这些组件看起来就像是React组件一样，并且所有属性（包括函数，对象和数组）都可以正确传递。绑定还通过创建一个名为“on”的方法来处理自定义事件。这些使React开发人员可以像对待React组件一样对待Web组件，并与之进行交互，开发。

### Stencil使用什么技术？

模板编译器是用TypeScript构建的，在npm上发布。它的发行版包括类型，这使得开发人员更容易使用stencil Api。

## 能力（功能）

### 模板组件可在哪里使用？

使用Web组件的一大优势是您的组件库可在所有项目中运行，而不仅仅是桌面Web应用程序。

例如，使用类似Ionic的混合移动框架，您可以在几乎任何平台或设备上部署Web组件，从本地iOS和Android应用程序到Electron和桌面Web应用程序，甚至是Progressive Web Apps(PWA)。

### Web组件的局限性是什么？

Web组件规范是有意为之的低级规范，而且就其本身而言，它们并没有提供框架质量的开发人员体验。Web组件运行在一组相当原始的标准上，因此您需要一些帮助才能使它们满足您的目标。

一些限制包括：

当您尝试在应用程序中使用纯Web组件时，默认情况下不支持服务器端呈现和渐进增强等功能，而且一些过时的客户机不支持Web组件标准。

此外，尽管Web组件在技术上可以与任何框架一起工作，但仍存在一些限制，如缺乏类型支持和输入绑定，以及如上所述的将属性传递给组件是一种挑战。

好消息是，借助Stencil之类的开源工具，您可以克服所有这些挑战。Stencil包括针对Angular，React和Vue的框架的一些绑定，因此您可以轻松地将Web组件库导入任何框架，并像它们是该框架的原生一样与它们进行交互，并使用所有惯用的功能。

### 什么是框架绑定？

虽然Web组件可以与任何JavaScript框架配对，但Stencil具有内置的特殊用途绑定，可提供企业团队在Angular，React和Vue中构建应用程序时期望使用更高级的功能。

### Stencil向Web组件添加了哪些功能？

Web组件本身还不足以提供高质量的开发体验。构建快速的Web应用程序需要创新，而这些创新以前被锁定在传统Web框架内。Stencil的创建是为了将这些功能从传统框架中提取出来，并带入快速兴起的Web组件标准中。

与直接使用Web组件相比，Stencil提供了额外的API，这些API使编写快速的组件变得更加简单。诸如Virtual DOM，JSX和异步呈现之类的API使快速，强大的组件易于创建，同时仍保持与Web组件的100％兼容性。

### 哪些浏览器可以支持Stencil组件？

stencil可以在现代浏览器和IE11上运行

### stencil提供什么样的 polyfills 

为了使Stencil在Internet Explorer 11及更高版本上运行，需要一些polyfill。幸运的是，Stencil的体系结构允许现代浏览器不必下载任何polyfill。

此外，现代的浏览器能够使用原生的最新功能，而无需转换为ES5（并使代码更易于调试）。例如，所有ES 2017功能（例如async / await）均在本地运行。

## stencil 项目

### 在哪里获得支持

如果这是您第一次建立一个设计系统或者新的stencil，[取得联系](https://ionicframework.com/sales?product_of_interest=Design%20Systems)是我们的解决方案工程师一个关于如何实现你的目标磋商和利用的平台。

### 我该如何参与

Stencil是一个开源项目，我们鼓励您做出贡献。您可以从在GitHub上创建问题，提交功能请求以及帮助复现bug。如果您想有贡献并参与进来，请参阅我们的贡献者指南，并查看我们的问题跟踪器。

### Stencil是开源的吗？

是的，Stencil是开源的，其源代码可以在GitHub上找到。欢迎社会各界作出贡献。

### Stencil使用哪个软件许可证？

Stencil的软件许可证为MIT。

### 谁在做S​​tencil的工作？

大多数开发工作由Ionic的工程师完成。如果您对Stencil感兴趣，我们鼓励您加入社区并做出贡献！最好的起点是在Stencil Slack Channel上。